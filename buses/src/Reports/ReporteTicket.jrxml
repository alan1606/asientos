<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="report name" pageWidth="612" pageHeight="396" columnWidth="572" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20">
	<property name="ireport.zoom" value="1.4641000000000006"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<parameter name="idCliente" class="java.lang.Integer">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="idViaje" class="java.lang.Integer">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="ciudad" class="java.lang.String"/>
	<parameter name="estado" class="java.lang.String"/>
	<parameter name="fecha" class="java.lang.String"/>
	<parameter name="cliente" class="java.lang.String"/>
	<parameter name="idDetalle" class="java.lang.Long">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<queryString>
		<![CDATA[select costo as costo, 
anticipo as anticipo, 
sube,
DATE_FORMAT(hora, "%I:%m %p") as hora, group_concat(distinct(asiento.numero)) as asientos, 
detalle.viaje as viaje, 
viaje.observaciones as observaciones, 
pago as pago, 
DATE_FORMAT(hora_regreso, "%I:%i %p") as hora_regreso, DATE_FORMAT(fecha_regreso, "%d/%m/%Y") as fecha_regreso, DATE_FORMAT(fecha_venta, "%d/%m/%Y") as fecha_venta, 
personas as numeroP, 
cliente.telefono as telefono from detalle 
join cliente on detalle.id_cliente = cliente.id
join viaje on detalle.id_viaje = viaje.id
join  destino on viaje.id_destino = destino.id
join asiento on asiento.id_viaje=viaje.id and asiento.id_cliente = cliente.id
join estado on estado.id = destino.id_estado
where detalle.id_cliente = $P{idCliente} and detalle.id_viaje = $P{idViaje} and detalle.estado != "CANCELADO" and detalle.id = $P{idDetalle};]]>
	</queryString>
	<field name="costo" class="java.lang.Double"/>
	<field name="anticipo" class="java.lang.Double"/>
	<field name="sube" class="java.lang.String"/>
	<field name="hora" class="java.lang.String"/>
	<field name="asientos" class="java.lang.String"/>
	<field name="viaje" class="java.lang.String"/>
	<field name="observaciones" class="java.lang.String"/>
	<field name="pago" class="java.lang.String"/>
	<field name="hora_regreso" class="java.lang.String"/>
	<field name="fecha_regreso" class="java.lang.String"/>
	<field name="fecha_venta" class="java.lang.String"/>
	<field name="numeroP" class="java.lang.Integer"/>
	<field name="telefono" class="java.lang.String"/>
	<background>
		<band splitType="Stretch"/>
	</background>
	<title>
		<band height="27" splitType="Stretch"/>
	</title>
	<pageHeader>
		<band splitType="Stretch"/>
	</pageHeader>
	<columnHeader>
		<band height="45" splitType="Stretch">
			<textField>
				<reportElement x="0" y="0" width="569" height="20"/>
				<textElement textAlignment="Right">
					<font size="12" isBold="true"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA["FECHA: " + $F{fecha_venta}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="0" y="20" width="569" height="20"/>
				<textElement textAlignment="Right">
					<font size="12" isBold="true"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA["TELÉFONO: " + $F{telefono}]]></textFieldExpression>
			</textField>
		</band>
	</columnHeader>
	<detail>
		<band height="192" splitType="Stretch">
			<textField>
				<reportElement x="0" y="0" width="559" height="20"/>
				<textElement>
					<font size="12" isBold="true"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA["RECIBIMOS DEL CLIENTE " + $P{cliente}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="0" y="20" width="559" height="20"/>
				<textElement>
					<font size="12" isBold="true"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA["LA CANTIDAD DE $" + $F{anticipo}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="0" y="40" width="572" height="20"/>
				<textElement>
					<font size="12" isBold="true"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA["POR ANTICIPO A CUENTA DE " +  $F{numeroP} +  " LUGAR(ES) A " + $P{ciudad} + " EN VIAJE "+ $F{viaje}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="0" y="60" width="572" height="20"/>
				<textElement>
					<font size="12" isBold="true"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA["PARTIENDO DE " + $F{sube} + " EL DÍA " + $P{fecha} + " A LAS " + $F{hora}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="0" y="80" width="572" height="20"/>
				<textElement>
					<font size="12" isBold="true"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA["REGRESANDO DE " + $P{ciudad} +  " EL DÍA "  +  $F{fecha_regreso} + " A LAS " + $F{hora_regreso}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="0" y="100" width="572" height="20"/>
				<textElement>
					<font size="12" isBold="true"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA["OBSERVACIONES " + $F{observaciones}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="0" y="130" width="572" height="20"/>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font size="12" isBold="true"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA["LUGARES ASIGNADOS " + $F{asientos}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="0" y="160" width="572" height="20"/>
				<textElement>
					<font size="12" isBold="true"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA["MÉTODO DE PAGO: " + $F{pago}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<summary>
		<band height="86">
			<textField>
				<reportElement x="0" y="66" width="572" height="20"/>
				<textElement>
					<font size="12" isBold="true"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA["**EN CASO DE CANCELACIÓN NO SE REEMBOLSA EL ANTICIPO**"]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="0" y="0" width="572" height="20"/>
				<textElement>
					<font size="12" isBold="true"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA["TOTAL: "  + $F{costo}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="0" y="20" width="572" height="20"/>
				<textElement>
					<font size="12" isBold="true"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA["ANTICIPO: " + $F{anticipo}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="0" y="40" width="572" height="20"/>
				<textElement>
					<font size="12" isBold="true"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA["RESTANTE: " +($F{costo} - $F{anticipo})]]></textFieldExpression>
			</textField>
		</band>
	</summary>
</jasperReport>
